## âœ¨ ë¦¬ë•ìŠ¤ë€?

---

ìë°”ìŠ¤í¬ë¦½íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìœ„í•œ `ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬` ì…ë‹ˆë‹¤.
ì¦‰ ReduxëŠ” Reactë¿ë§Œì•„ë‹ˆë¼ Angular, Vue ë˜ëŠ” Vanilla JavaScriptì™€ ê°™ì€ ë‹¤ë¥¸ ë¼ì´ë¸ŒëŸ¬ë¦¬, í”„ë ˆì„ì›Œí¬ì—ì„œë„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ğŸ¤” ìƒíƒœ ê´€ë¦¬ì˜ í•„ìš”ì„±

---

ìš°ì„  ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ì— ëŒ€í•´ì„œ ê°„ë‹¨í•˜ê²Œ ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤.
ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©í•˜ëŠ” ìƒíƒœ(state)ê°€ ë³€ê²½ë˜ë©´, ì»´í¬ë„ŒíŠ¸ëŠ” ë¦¬ë Œë”ë§ë˜ë©´ì„œ ë³€í•˜ëŠ” ê°’ì„ í‘œì‹œí•©ë‹ˆë‹¤. ëŒ€ë¶€ë¶„ ì´ stateë¥¼ ë‹¤ë¥¸ ìì‹ ì»´í¬ë„ŒíŠ¸ì—ë„ ì ìš©í•˜ê¸° ìœ„í•´ ì „ë‹¬í•˜ë ¤ëŠ” ê²½ìš°ê°€ ìƒê¸°ëŠ”ë°, ê·¸ ë•ŒëŠ” propsë¡œ ì´ ê°’ì„ ë‚´ë ¤ì£¼ê²Œ ë©ë‹ˆë‹¤.

í•˜ì§€ë§Œ ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì—ì„œ ìì‹ ì»´í¬ë„ŒíŠ¸ë¡œ dataë¥¼ ë³´ë‚´ëŠ”ê²ƒì´ ì•„ë‹ˆë¼ ê·¸ ìì‹ì˜ ìì‹ ì»´í¬ë„ŒíŠ¸ ë“± ì§ì ‘ì ì¸ ì—°ê´€ì´ ì—†ëŠ” ì»´í¬ë„ŒíŠ¸ì—ê²Œ dataë¥¼ ì „ë‹¬í•˜ë ¤ë©´ ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œìš”?

ìƒíƒœê°’ì„ ì „ë‹¬í•˜ê¸° ìœ„í•´, ë˜ ê·¸ê²ƒì„ ë³€ê²½í•˜ëŠ” í•¨ìˆ˜ë„ ê°™ì´ ì „ë‹¬í•˜ë ¤ê³  ë¶€ëª¨-ìì‹-.. ìœ¼ë¡œ ì´ì–´ì§€ëŠ” ì „ë‹¬ ê³¼ì •ì„ ë§¤ë²ˆ ì‘ì„±í•´ì•¼ í•˜ëŠ” ë§¤ìš° ë¹„íš¨ìœ¨ì ì¸ ìƒí™©ì´ ë°œìƒí•©ë‹ˆë‹¤.

ë˜í•œ í”„ë¡œì íŠ¸ê°€ ì»¤ì ¸ì„œ ì»´í¬ë„ŒíŠ¸ ê°¯ìˆ˜ê°€ ë§ì•„ì§€ê³  ê·¸ë“¤ê°„ì— ì„œë¡œ ê³µìœ í•˜ëŠ” state ê°’ë“¤ì´ ë§ì•„ì§„ë‹¤ë©´, stateê°€ ì–´ë””ì„œ ì–´ë–»ê²Œ ë³€í•˜ëŠ”ì§€, ê·¸ë¦¬ê³  ì´ ì—…ë°ì´íŠ¸ê°€ ì–´ë–¤ ì»´í¬ë„ŒíŠ¸ì˜ ì–´ë–¤ ì‘ì—…ìœ¼ë¡œ ì¸í•´ ë°œìƒí–ˆëŠ”ì§€, ì†ì‰½ê²Œ íŒŒì•…í•˜ê¸°ê°€ í˜ë“¤ ê²ƒì…ë‹ˆë‹¤.

ê·¸ë˜ì„œ ì´ëŸ°ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ìƒíƒœê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì„ ì‚¬ìš©í•˜ê¸° ì‹œì‘í–ˆìŠµë‹ˆë‹¤.

ìœ„ ê·¸ë¦¼ì²˜ëŸ¼ ReduxëŠ” store ë¼ëŠ” state ì €ì¥ ê³µê°„ì„ ë‘ì–´, ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ê°€ í•˜ë‚˜ì˜ storeë¥¼ ë°”ë¼ ë³´ê²Œë” í•©ë‹ˆë‹¤.

ë”°ë¼ì„œ ì–´ë–¤ ì»´í¬ë„ŒíŠ¸ì—ì„œë„ propsë¡œ ë‚´ë ¤ì„œ dataë¥¼ ì „ë‹¬ ë°›ì„ í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.

### âœï¸ ë¦¬ë•ìŠ¤ ì‚¬ìš©ë²•

---

#### 1. ìŠ¤í† ì–´(Store)

---

Redux ìŠ¤í† ì–´(store)ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ê³ , .getState(), .dispach(), .subscribe() ê°™ì€ ë©”ì„œë“œë¥¼ ì œê³µí•©ë‹ˆë‹¤.

ìŠ¤í† ì–´ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìƒíƒœë¥¼ ë‚˜íƒ€ë‚´ëŠ” ë§ì€ key:value ìŒìœ¼ë¡œ êµ¬ì„±ëœ ì •ë³´ë¥¼ ê°€ì§„ í•˜ë‚˜ì˜ í° JavaScript ê°ì²´ì…ë‹ˆë‹¤. React ì»´í¬ë„ŒíŠ¸ì— ë¶„ì‚°ë˜ì–´ ìˆëŠ” ìƒíƒœ ê°ì²´ì™€ ë‹¬ë¦¬ ìŠ¤í† ì–´ëŠ” **í•˜ë‚˜** ë§Œ ì¡´ì¬í•©ë‹ˆë‹¤. ìŠ¤í† ì–´ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì— ìƒíƒœë¥¼ ì œê³µí•˜ë©° ìƒíƒœê°€ ì—…ë°ì´íŠ¸ ë˜ë©´ ë·°(UI)ê°€ ë‹¤ì‹œ ê·¸ë ¤ì§‘ë‹ˆë‹¤.

> ğŸ’¡ ì°¸ê³ ë¡œ ë‚´ë¶€ ìƒíƒœë¥¼ ë³€ê²½í•˜ëŠ” ìœ ì¼í•œ ë°©ë²•ì€ í•´ë‹¹ ìƒíƒœì— ëŒ€í•œ Actionì„ ì „ë‹¬í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤!

> ğŸ’¡ ì•±ì—ëŠ” í•˜ë‚˜ì˜ ìŠ¤í† ì–´ë§Œ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.

```js
// store.js
import { createStore } from 'redux';

const store = createStore(reducer);
```

#### 2. ì•¡ì…˜(Action)

---

Actionì€ "ìƒíƒœ ë³€ê²½ì„ ì„¤ëª…í•˜ëŠ” ì •ë³´"ë¥¼ ìŠ¤í† ì–´ë¡œ ë³´ë‚´ëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ ê°ì²´ì…ë‹ˆë‹¤.
ìƒíƒœ ê°’ì„ ë³€ê²½(êµì²´) í•  ê²½ìš°, êµì²´ í•  ìƒíƒœ ê°’(payload)ì„ ë¦¬ë“€ì„œ(í•¨ìˆ˜)ì— ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```js
// store/actions/actionTypes.js

const ADD = 'ADD';
const DELETE = 'DELETE';
```

```js
// store/actions/todos.js
import { ADD, MINUS } from './actionTypes';

export const addTodo = () => ({ type: ADD });
export const deleteTodo = () => ({ type: DELETE });
```

#### 3. ìŠ¤í…Œì´íŠ¸(State)

---

Redux ìŠ¤í† ì–´ì—ì„œ ê´€ë¦¬í•˜ëŠ” ìƒíƒœ(ë°ì´í„°) ì…ë‹ˆë‹¤.
ìƒíƒœ íŠ¸ë¦¬(state tree)ëŠ” "ë¶ˆë³€ ìƒíƒœ(Immutable State). ì¦‰ ìˆœìˆ˜í•œ ìƒíƒœ"ë¥¼ ê°€ì ¸ì•¼ í•©ë‹ˆë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ UI, View ë ˆì´ì–´ ìƒíƒœëŠ” ìˆœìˆ˜í•œ í•¨ìˆ˜(ë¦¬ë“€ì„œ)ë¡œ ì²˜ë¦¬ ë  ë•Œ ì˜ˆì¸¡ ê°€ëŠ¥(ì‚¬ì´ë“œ ì´í™íŠ¸ âœ˜) í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

```js
// ìƒíƒœ
// - ì¼ë°˜ì ìœ¼ë¡œ state ë˜ëŠ” initState ì´ë¦„ìœ¼ë¡œ ì„¤ì •
// - ìƒíƒœëŠ” ë¦¬ë“€ì„œ(í•¨ìˆ˜)ì˜ ì²«ë²ˆì§¸ ì¸ìë¡œ ì „ë‹¬ ë¨

// todos
const initState = [];
```

#### 4. ë¦¬ë“€ì„œ(Reducer)

---

ë¦¬ë“€ì„œë€? 'ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒíƒœë¥¼ êµì²´í•˜ëŠ” í•¨ìˆ˜'ë¥¼ ë§í•©ë‹ˆë‹¤. 'ì´ì „ ìƒíƒœ(prevState)'ë¥¼ 'ì—…ë°ì´íŠ¸ëœ ìƒíƒœ(state)'ë¡œ êµì²´(return) í•©ë‹ˆë‹¤.

> ë¦¬ë“€ì„œëŠ” ìƒíƒœì™€ ì•¡ì…˜ì„ ì „ë‹¬ ë°›ì•„ 'ì´ì „ ìƒíƒœ'ë¥¼ 'ë‹¤ìŒ ìƒíƒœ'ë¡œ êµì²´ í•œ í›„ ë°˜í™˜í•©ë‹ˆë‹¤. ì£¼ì–´ì§„ ìƒíƒœë¥¼ ìˆ˜ì •í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ìƒˆë¡œìš´ ìƒíƒœë¡œ êµì²´í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤. ì¦‰, ë¦¬ë“€ì„œëŠ” 'ìˆœìˆ˜í•œ í•¨ìˆ˜' ì—¬ì•¼ í•©ë‹ˆë‹¤.
> â—ï¸ **`ìˆœìˆ˜í•œ í•¨ìˆ˜`** ë€? ë°˜í™˜(reture) ê°’ì´ ì „ë‹¬ ì¸ì(argument) ê°’ì—ë§Œ ì˜ì¡´í•˜ëŠ” í•¨ìˆ˜ë¥¼ ë§í•©ë‹ˆë‹¤.

```js
ë¦¬ë“€ì„œ = (ìƒíƒœ, ì•¡ì…˜) {
  // ì•¡ì…˜ íƒ€ì… ë¶„ì„
  // ì´ì „ ìƒíƒœ â†’ ë‹¤ìŒ ìƒíƒœë¡œ êµì²´
  // ë‹¤ìŒ ìƒíƒœ ë°˜í™˜
}
```

> ğŸ’¡ reducer ë‚´ë¶€ì—ì„œ í•˜ì§€ ë§ì•„ì•¼ í•  ê²ƒ!

- ì „ë‹¬ ë°›ì€ ë§¤ê°œë³€ìˆ˜ state, actionì— ë³€í˜•ì„ ê°€í•˜ë©´ ì•ˆë©ë‹ˆë‹¤.
- ë„¤íŠ¸ì›Œí‚¹(API í˜¸ì¶œ â† ë¹„ë™ê¸° í†µì‹ ) ë˜ëŠ” ë¼ìš°íŒ…ì„ ë³€ê²½í•˜ë©´ ì•ˆë©ë‹ˆë‹¤.
- non-pure í•¨ìˆ˜ë“¤ í˜¸ì¶œ ex) `Date.now()` or `Math.random()`

```js
const reducer = (prevState = initState, action) => {
  switch (action.type) {
    case ADD:
      return [{ text: action.text, id: Date.now() }, ...state];
    case DELETE:
      return prevState.filter((toDo) => toDo.id !== action.id);
    default:
      return prevState;
  }
};
```

#### 5. getState()

---

ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ í˜„ì¬ ìƒíƒœ íŠ¸ë¦¬ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
ìŠ¤í† ì–´ì˜ ë¦¬ë“€ì„œê°€ ë°˜í™˜í•œ ë§ˆì§€ë§‰ ê°’ê³¼ ê°™ìŠµë‹ˆë‹¤.

```js
store.getState();
```

#### 6. ì„œë¸ŒìŠ¤í¬ë¦½ì…˜(subscribe)

---

ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒíƒœ ë³€ê²½ì„ êµ¬ë…(subscribe, ê°ì§€) í•˜ì—¬ ìƒíƒœê°€ ì—…ë°ì´íŠ¸ ë˜ë©´ ë“±ë¡ëœ ë¦¬ìŠ¤ë„ˆ(listener)ë¥¼ ì‹¤í–‰ì‹œí‚µë‹ˆë‹¤.

```js
store.subscribe(render);
```

React Redux ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì¶”ê°€í•´ ì‚¬ìš©í•˜ë©´ ì„œë¸ŒìŠ¤í¬ë¦½ì…˜ì€ ìë™ ì²˜ë¦¬ë©ë‹ˆë‹¤.

### Redux ì „ì²´ ì‚¬ìš© ì½”ë“œ

---

```js
// src/index.js
import React from 'react';
import App from './components/App';
import { Provider } from 'react-redux';
import { createRoot } from 'react-dom/client';
import store from './store';

const root = createRoot(document.getElementById('root'));

root.render(
  <Provider store={store}>
    <App />
  </Provider>
);
```

```js
// store/index.js
import { createStore } from 'redux';

const store = createStore(reducer);
```

```js
// store/action/index.js
const addTodo = (text) => {
  return {
    type: ADD,
    text,
  };
};

const deleteTodo = (id) => {
  return {
    type: DELETE,
    id,
  };
};
```

```js
// store/action/actionTypes.js
export const ADD = 'ADD';
export const DELETE = 'DELETE';
```

```js
// store/reducers/todos.js
import ADD from '../action/ADD';
import DELETE from '../action/DELETE';

const reducer = (prevState = initState, action) => {
  switch (action.type) {
    case ADD:
      return [{ text: action.text, id: Date.now() }, ...state];
    case DELETE:
      return prevState.filter((toDo) => toDo.id !== action.id);
    default:
      return prevState;
  }
```

### Redux ìŠ¤í† ì–´ êµ¬ì¡°

---

```js
store/
â”œâ”€â”€ index.js # ìŠ¤í† ì–´ ì—”íŠ¸ë¦¬ (ìŠ¤í† ì–´ ìƒì„± â† ë£¨íŠ¸ ë¦¬ë“€ì„œ)
â”œâ”€â”€ actions/
â”‚   â”œâ”€â”€ index.js # ì•¡ì…˜ ì—”íŠ¸ë¦¬ (ì•¡ì…˜ ë‚´ë³´ë‚´ê¸°)
â”‚   â”œâ”€â”€ actionTypes.js # ì•¡ì…˜ íƒ€ì… (ì•¡ì…˜ íƒ€ì…: ìƒìˆ˜)
â”‚   â””â”€â”€ todos.js
â””â”€â”€ reducers/
    â”œâ”€â”€ index.js # ë¦¬ë“€ì„œ ì—”íŠ¸ë¦¬ ([ë£¨íŠ¸ ë¦¬ë“€ì„œ:ë³‘í•©] ë‚´ë³´ë‚´ê¸°)
    â””â”€â”€ todos.js
```

## ë ˆí¼ëŸ°ìŠ¤

ğŸŒ‘ [ì°¸ê³ ë¸”ë¡œê·¸](https://yamoo9.github.io/react-master/lecture/rd-redux.html#%E1%84%89%E1%85%A1%E1%86%BC%E1%84%90%E1%85%A2-%E1%84%80%E1%85%AA%E1%86%AB%E1%84%85%E1%85%B5%E1%84%8B%E1%85%B4-%E1%84%91%E1%85%B5%E1%86%AF%E1%84%8B%E1%85%AD%E1%84%89%E1%85%A5%E1%86%BC)
